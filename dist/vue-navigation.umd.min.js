/**
* vue-navigation v1.1.4
* https://github.com/zack24q/vue-navigation
* Released under the MIT License.
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.VueNavigation=n()}(this,function(){"use strict";function t(){return"xxxxxxxx".replace(/[xy]/g,function(t){var n=16*Math.random()|0;return("x"===t?n:3&n|8).toString(16)})}function n(t,n){return t+"__navigation_routers_index"+(n?"__"+n:"")}function e(t,n){return Array.isArray(t)?t.indexOf(n)>-1:"string"==typeof t?t.split(",").indexOf(n)>-1:!!isRegExp(t)&&t.test(n)}var o=[];window.sessionStorage.VUE_NAVIGATION&&(o=JSON.parse(window.sessionStorage.VUE_NAVIGATION));var i=function(){return o.reduce(function(t,n){return t[n.path]=n.key,t},{})},a=o,r=a.push.bind(a);a.push=function(t){var n=t.path,e=t.key;a.forEach(function(t){return t.path===n&&(t.key=e)}),r(t)};var s=function(n,e,o,r){e&&e.registerModule(o,{state:{routes:a},mutations:{"navigation/FORWARD":function(n,e){e.to,e.from;var o=e.name;n.routes.push({path:o,key:t()})},"navigation/BACK":function(t,n){n.to,n.from;var e=n.count;t.routes.splice(t.routes.length-e,e)},"navigation/REPLACE":function(n,e){e.to,e.from;var o=e.name;n.routes.splice(a.length-1,1,{path:o,key:t()})},"navigation/REFRESH":function(t,n){n.to,n.from},"navigation/RESET":function(t){t.routes.splice(0,t.routes.length)}}});var s=function(i,r,s,c){var u={route:r},f={route:s},h=e?e.state[o].routes:a;f.name=(h[h.length-1]||{}).path||null,u.name=i,e?e.commit("navigation/FORWARD",{to:u,from:f,name:i}):h.push({path:i,key:t()}),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(h),n.$emit("forward",u,f)},c=function(t,i,r){var s={route:i},c={route:r},u=e?e.state[o].routes:a;c.name=u[u.length-1].path,s.name=u[u.length-1-t].path,e?e.commit("navigation/BACK",{to:s,from:c,count:t}):u.splice(a.length-t,t),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(u),n.$emit("back",s,c)},u=function(i,r,s){var c={route:r},u={route:s},f=e?e.state[o].routes:a;u.name=f[f.length-1].path||null,c.name=i,e?e.commit("navigation/REPLACE",{to:c,from:u,name:i}):f.splice(a.length-1,1,{path:i,key:t()}),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(f),n.$emit("replace",c,u)},f=function(t,i){var r={route:t},s={route:i},c=e?e.state[o].routes:a;r.name=s.name=c[c.length-1].path,e&&e.commit("navigation/REFRESH",{to:r,from:s}),n.$emit("refresh",r,s)};return{record:function(t,n,e,o){var r=t.path;e?u(r,t,n):!i()[r]||o?s(r,t,n):r===a[a.length-1].path?f(t,n):c(1,t,n)},reset:function(){e?e.commit("navigation/RESET"):a.splice(0,a.length),window.sessionStorage.VUE_NAVIGATION=JSON.stringify([]),n.$emit("reset")}}},c=function(t){return{name:"navigation",abstract:!0,props:{},data:function(){return{routes:a}},computed:{},watch:{routes:function(t){var n=t.map(function(t){return t.path+"__navigation_routers_index__"+t.key});for(var o in this.cache)if(!e(n,o)){var i=this.cache[o];i&&i.componentInstance.$destroy(),delete this.cache[o]}}},created:function(){this.cache={}},destroyed:function(){for(var t in this.cache){var n=this.cache[t];n&&n.componentInstance.$destroy()}},render:function(){var t=this.$slots.default?this.$slots.default[0]:null;if(t){t.key=t.key||(t.isComment?"comment":t.tag);var e=i(),o=n(this.$route.path,e[this.$route.path]);-1===t.key.indexOf(o)&&(t.key="__navigation-"+o+"-"+t.key),this.cache[o]?t.key===this.cache[o].key?t.componentInstance=this.cache[o].componentInstance:(this.cache[o].componentInstance.$destroy(),this.cache[o]=t):this.cache[o]=t,t.data.keepAlive=!0}return t}}};return{install:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.router,o=n.store,i=n.moduleName,r=void 0===i?"navigation":i;n.keyName;if(e){var u=new t,f=s(u,o,r),h=e.replace.bind(e),p=e.push.bind(e),m=!1,g=!1;e.replace=function(t,n,e){m=!0,h(t,n,e)},e.push=function(t,n,e){g=!0,p(t,n,e)},e.afterEach(function(t,n){var e=(a[a.length-2]||{}).path!==t.path;f.record(t,n,m,g||e),m=!1,g=!1}),t.component("navigation",c()),t.navigation=t.prototype.$navigation={on:function(t,n){u.$on(t,n)},once:function(t,n){u.$once(t,n)},off:function(t,n){u.$off(t,n)},getRoutes:function(){return a.slice()},cleanRoutes:function(){return f.reset()}}}else console.error("vue-navigation need options: router")}}});