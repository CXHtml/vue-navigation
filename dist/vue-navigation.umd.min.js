/**
* vue-navigation v1.1.4
* https://github.com/zack24q/vue-navigation
* Released under the MIT License.
*/
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):t.VueNavigation=n()}(this,function(){"use strict";function t(t,n){return(t.name||t.path)+"?"+t.query[n]}function n(t,n){return Array.isArray(t)?t.indexOf(n)>-1:"string"==typeof t?t.split(",").indexOf(n)>-1:!!isRegExp(t)&&t.test(n)}var e=[];window.sessionStorage.VUE_NAVIGATION&&(e=JSON.parse(window.sessionStorage.VUE_NAVIGATION));var o=e,i=function(n,e,i,r){e&&e.registerModule(i,{state:{routes:o},mutations:{"navigation/FORWARD":function(t,n){n.to,n.from;var e=n.name;t.routes.push(e)},"navigation/BACK":function(t,n){n.to,n.from;var e=n.count;t.routes.splice(t.routes.length-e,e)},"navigation/REPLACE":function(t,n){n.to,n.from;var e=n.name;t.routes.splice(o.length-1,1,e)},"navigation/REFRESH":function(t,n){n.to,n.from},"navigation/RESET":function(t){t.routes.splice(0,t.routes.length)}}});var a=function(t,r,a){var s={route:r},c={route:a},u=e?e.state[i].routes:o;c.name=u[u.length-1]||null,s.name=t,e?e.commit("navigation/FORWARD",{to:s,from:c,name:t}):u.push(t),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(u),n.$emit("forward",s,c)},s=function(t,r,a){var s={route:r},c={route:a},u=e?e.state[i].routes:o;c.name=u[u.length-1],s.name=u[u.length-1-t],e?e.commit("navigation/BACK",{to:s,from:c,count:t}):u.splice(o.length-t,t),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(u),n.$emit("back",s,c)},c=function(t,r,a){var s={route:r},c={route:a},u=e?e.state[i].routes:o;c.name=u[u.length-1]||null,s.name=t,e?e.commit("navigation/REPLACE",{to:s,from:c,name:t}):u.splice(o.length-1,1,t),window.sessionStorage.VUE_NAVIGATION=JSON.stringify(u),n.$emit("replace",s,c)},u=function(t,r){var a={route:t},s={route:r},c=e?e.state[i].routes:o;a.name=s.name=c[c.length-1],e&&e.commit("navigation/REFRESH",{to:a,from:s}),n.$emit("refresh",a,s)};return{record:function(n,e,i){var f=t(n,r);if(i)c(f,n,e);else{var h=o.lastIndexOf(f);-1===h?a(f,n,e):h===o.length-1?u(n,e):s(o.length-1-h,n,e)}},reset:function(){e?e.commit("navigation/RESET"):o.splice(0,o.length),window.sessionStorage.VUE_NAVIGATION=JSON.stringify([]),n.$emit("reset")}}},r=function(e){return{name:"navigation",abstract:!0,props:{},data:function(){return{routes:o}},computed:{},watch:{routes:function(t){for(var e in this.cache)if(!n(t,e)){var o=this.cache[e];o&&o.componentInstance.$destroy(),delete this.cache[e]}}},created:function(){this.cache={}},destroyed:function(){for(var t in this.cache){var n=this.cache[t];n&&n.componentInstance.$destroy()}},render:function(){var n=this.$slots.default?this.$slots.default[0]:null;if(n){n.key=n.key||(n.isComment?"comment":n.tag);var o=t(this.$route,e);-1===n.key.indexOf(o)&&(n.key="__navigation-"+o+"-"+n.key),this.cache[o]?n.key===this.cache[o].key?n.componentInstance=this.cache[o].componentInstance:(this.cache[o].componentInstance.$destroy(),this.cache[o]=n):this.cache[o]=n,n.data.keepAlive=!0}return n}}};return{install:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.router,a=n.store,s=n.moduleName,c=void 0===s?"navigation":s,u=n.keyName,f=void 0===u?"VNK":u;if(e){var h=new t,m=i(h,a,c,f),l=e.replace.bind(e),g=e.push.bind(e),d=!1,v=!1;e.replace=function(t,n,e){d=!0,l(t,n,e)},e.push=function(t,n,e){v=!0,g(t,n,e)};var p=window.history.length;e.afterEach(function(t,n){var e=window.history.length>p;setTimeout(function(){p=window.history.length}),m.record(t,n,d,v||e),d=!1,v=!1}),t.component("navigation",r(f)),t.navigation=t.prototype.$navigation={on:function(t,n){h.$on(t,n)},once:function(t,n){h.$once(t,n)},off:function(t,n){h.$off(t,n)},getRoutes:function(){return o.slice()},cleanRoutes:function(){return m.reset()}}}else console.error("vue-navigation need options: router")}}});